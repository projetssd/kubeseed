---
application: 'rutorrent'
app_port: 8080  # doit être un entier, sans les quotes !
image: 'mondedie/rutorrent:latest'
application_volumes:
  - local_path: "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{application}}/config"
    container_path: "/config"
  - local_path: "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{application}}/data"
    container_path: "/data"
  - local_path: "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{ application }}/sock"
    container_path: "/run/rtorrent"
  - local_path: "{{ lookup('env','HOME') }}"
    container_path: "{{ lookup('env','HOME') }}"

application_env:
  - name: UID
    value: '{{user.userid}}'
  - name: GID
    value: '{{user.groupid}}'
  - name: TZ
    value: 'Europe/Paris'
  - name: DOWNLOAD_DIRECTORY
    value: "{{ lookup('env','HOME') }}/local/rutorrent"
  - name: PORT_RTORRENT
    value: 30000

# tags spécifiques à ajouter à la construction du docker
specific_container_info:
  ports:
    - 30000
#  Pour contourner l'authentification pour des outils de style nzb360, décommentez le pavé ci dessous
#extra_labels:
#  traefik.http.routers.rutorrent-rtr-bypass.rule: 'Path(`/RPC2`)'
#  traefik.http.routers.rutorrent-rtr-bypass.priority: '100'
#  traefik.http.routers.rutorrent-rtr-bypass.tls: 'true'
#  traefik.http.routers.rutorrent-rtr-bypass.middlewares: 'chain-basic-auth@file'
#  traefik.http.routers.rutorrent-rtr-bypass.service: 'rutorrent-svc'
